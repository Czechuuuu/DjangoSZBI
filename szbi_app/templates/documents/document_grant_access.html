{% extends "base.html" %}

{% block title %}Nadaj dostęp - {{ document.designation }} - SZBI{% endblock %}

{% block content %}
<h2>Nadaj dostęp do dokumentu</h2>

<p>Dokument: <strong>[{{ document.designation }}] {{ document.title }}</strong></p>

<div style="margin-bottom: 10px;">
    <a href="{% url 'documents:detail' document.pk %}">← Powrót do dokumentu</a>
</div>

<form method="post">
    {% csrf_token %}
    
    <table>
        <tr>
            <td><label for="id_permission_group"><strong>Grupa uprawnień: *</strong></label></td>
            <td>
                {{ form.permission_group }}
                {% if form.permission_group.errors %}
                    <br><span style="color: red;">{{ form.permission_group.errors.0 }}</span>
                {% endif %}
                <br><small>Wszyscy członkowie wybranej grupy uprawnień uzyskają dostęp do tego dokumentu.</small>
            </td>
        </tr>
        <tr>
            <td><label for="id_access_level"><strong>Poziom dostępu: *</strong></label></td>
            <td>
                {{ form.access_level }}
                {% if form.access_level.errors %}
                    <br><span style="color: red;">{{ form.access_level.errors.0 }}</span>
                {% endif %}
                <br><small>
                    <strong>Podgląd</strong> — członkowie grupy mogą przeglądać dokument<br>
                    <strong>Edycja</strong> — członkowie grupy mogą edytować dokument<br>
                    <strong>Zarządzanie</strong> — pełne uprawnienia do dokumentu
                </small>
            </td>
        </tr>
    </table>
    
    <br>
    <p><small>Jeśli ta grupa już ma dostęp do dokumentu, poziom dostępu zostanie zaktualizowany.</small></p>
    <button type="submit">Nadaj dostęp</button>
    <a href="{% url 'documents:detail' document.pk %}">Anuluj</a>
</form>

{% endblock %}
