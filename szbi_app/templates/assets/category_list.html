{% extends "base.html" %}

{% block title %}Kategorie aktywów - SZBI{% endblock %}

{% block content %}
<h2>Kategorie aktywów</h2>

<p>
    <a href="{% url 'assets:category_create' %}">+ Dodaj nową kategorię</a> |
    <a href="{% url 'assets:list' %}">Powrót do rejestru aktywów</a>
</p>

{% if categories %}
<table border="1" cellspacing="0" cellpadding="5" style="width: 100%;">
    <thead>
        <tr>
            <th>Kod</th>
            <th>Nazwa</th>
            <th>Kategoria nadrzędna</th>
            <th>Opis</th>
            <th>Liczba aktywów</th>
            <th>Akcje</th>
        </tr>
    </thead>
    <tbody>
        {% for category in categories %}
        <tr>
            <td><strong>{{ category.code }}</strong></td>
            <td>{{ category.name }}</td>
            <td>{{ category.parent|default:"-" }}</td>
            <td>{{ category.description|truncatewords:10|default:"-" }}</td>
            <td>{{ category.assets_count }}</td>
            <td>
                <a href="{% url 'assets:category_update' category.pk %}">Edytuj</a>
                {% if category.assets_count == 0 %}
                | <a href="{% url 'assets:category_delete' category.pk %}" style="color: red;">Usuń</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>Brak kategorii. <a href="{% url 'assets:category_create' %}">Dodaj pierwszą kategorię</a>.</p>
{% endif %}

{% endblock %}
